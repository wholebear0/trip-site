<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trip Gallery</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #f5f5f5;
}
h1 {
    text-align: center;
    margin-bottom: 20px;
    text-transform: capitalize;
}
#gallery {
    display: flex;
    flex-direction: column; /* one below the other */
    gap: 20px; /* spacing between images */
    align-items: center;
}
#gallery img {
    width: 90%; /* make images larger */
    max-width: 800px;
    border-radius: 8px;
    object-fit: cover;
}
#back-btn {
    display: block;
    margin: 30px auto;
    padding: 12px 24px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    background: #444;
    color: #fff;
    cursor: pointer;
    transition: 0.3s;
}
#back-btn:hover { background: #222; }
</style>
</head>
<body>

<h1 id="trip-title">Loading...</h1>
<div id="gallery">Loading...</div>
<button id="back-btn" onclick="history.back()">‚Üê Back to Map</button>

<script>
const APPS_SCRIPT_URL="https://script.google.com/macros/s/AKfycbxwMmz0fceVtuMSQLHV2b2FMwHP37RbOTk7jgd3rKS_LzdPziAF_Y50hbos3tjFfV39/exec"; // replace with your Apps Script URL
const params = new URLSearchParams(window.location.search);
const slug = params.get("slug");
const gallery = document.getElementById("gallery");
const titleElem = document.getElementById("trip-title");

fetch(APPS_SCRIPT_URL)
.then(res => res.json())
.then(data => {
    let urlsStr = data.images[slug] || "";
    titleElem.textContent = slug.replace(/-/g,' ');

    if(!urlsStr) {
        gallery.innerHTML = "<p>No photos for this trip.</p>";
        return;
    }

    // Split concatenated URLs by https://
    let urls = urlsStr.split("https://").filter(s => s.trim() !== "").map(s => "https://" + s);

    gallery.innerHTML = "";
    urls.forEach(url => {
        const img = document.createElement("img");
        img.src = url;
        img.alt = slug;
        gallery.appendChild(img);
    });
})
.catch(err => {
    console.error(err);
    gallery.innerHTML = "<p>Failed to load photos.</p>";
});
</script>

</body>
</html>
